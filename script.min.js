document.addEventListener("DOMContentLoaded",function(){gsap.registerPlugin(ScrollTrigger);const heroElements=document.querySelectorAll(".fade-in");gsap.to(heroElements,{opacity:1,y:0,duration:.8,stagger:.2,ease:"power2.out",delay:.3});gsap.utils.toArray(".slide-up").forEach((element,index)=>{gsap.fromTo(element,{opacity:0,y:30},{opacity:1,y:0,duration:.5,delay:index*.05,ease:"power2.out",scrollTrigger:{trigger:element,start:"top 90%",toggleActions:"play none none reverse"}})})});function closeBanner(){const banner=document.getElementById("topBanner");banner.style.display="none"}const mobileMenuBtn=document.getElementById("mobileMenuBtn");const navLinks=document.getElementById("navLinks");mobileMenuBtn.addEventListener("click",()=>{navLinks.classList.toggle("active");const icon=mobileMenuBtn.querySelector("i");if(navLinks.classList.contains("active")){icon.classList.remove("fa-bars");icon.classList.add("fa-times")}else{icon.classList.remove("fa-times");icon.classList.add("fa-bars")}});document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener("click",function(e){if(this.getAttribute("href")!=="#"){e.preventDefault();const targetId=this.getAttribute("href");const targetElement=document.querySelector(targetId);if(targetElement){const offsetTop=targetElement.offsetTop-80;window.scrollTo({top:offsetTop,behavior:"smooth"})}if(navLinks.classList.contains("active")){navLinks.classList.remove("active");const icon=mobileMenuBtn.querySelector("i");icon.classList.remove("fa-times");icon.classList.add("fa-bars")}}})});window.addEventListener("scroll",function(){const navbar=document.querySelector(".navbar");if(window.scrollY>100){navbar.style.background="rgba(255, 255, 255, 0.95)";navbar.style.backdropFilter="blur(10px)"}else{navbar.style.background="#ffffff";navbar.style.backdropFilter="none"}});const eventDetailsModal=document.getElementById("eventDetailsModal");const eventDetailsClose=document.getElementById("eventDetailsClose");const eventData={"racing-dummies":{title:"RACING FOR DUMMIES",image:"/assets/events/poster.jpg",description:"Perfect for beginners! This event is designed to introduce newcomers to the exciting world of autocross racing. Learn the basics of car control, racing techniques, and safety protocols in a supportive environment.",date:"August 30-31, 2025",location:"Negros Occidental Racing Circuit",status:"Registration Open",rules:`\n            <h3>Event Rules & Regulations</h3>\n            <h4>Vehicle Requirements</h4>\n            <ul>\n                <li>All vehicles must pass safety inspection</li>\n                <li>Helmets are mandatory for all drivers</li>\n                <li>Vehicles must be street legal and insured</li>\n                <li>No modifications that compromise safety</li>\n            </ul>\n            \n            <h4>Driver Requirements</h4>\n            <ul>\n                <li>Valid driver's license required</li>\n                <li>Minimum age: 18 years old</li>\n                <li>No racing experience necessary</li>\n                <li>Safety briefing attendance mandatory</li>\n            </ul>\n            \n            <h4>Course Rules</h4>\n            <ul>\n                <li>Follow course markers and instructions</li>\n                <li>No aggressive driving or dangerous maneuvers</li>\n                <li>Respect speed limits in designated areas</li>\n                <li>Immediate disqualification for unsafe behavior</li>\n            </ul>\n        `,registration:`\n            <h3>Registration Information</h3>\n            <h4>Entry Fee</h4>\n            <p>₱2,500 per driver (includes lunch and event t-shirt)</p>\n            \n            <h4>Registration Process</h4>\n            <ul>\n                <li>Complete online registration form</li>\n                <li>Submit required documents (license, insurance)</li>\n                <li>Pay registration fee</li>\n                <li>Receive confirmation email with event details</li>\n            </ul>\n            \n            <h4>Required Documents</h4>\n            <ul>\n                <li>Valid driver's license</li>\n                <li>Vehicle registration and insurance</li>\n                <li>Completed waiver form</li>\n                <li>Emergency contact information</li>\n            </ul>\n            \n            <h4>Registration Deadline</h4>\n            <p>March 10, 2025 - Limited to 50 participants</p>\n        `,schedule:`\n            <h3>Event Schedule</h3>\n            <h4>Morning Session (8:00 AM - 12:00 PM)</h4>\n            <ul>\n                <li>8:00 AM - Registration and check-in</li>\n                <li>8:30 AM - Safety briefing and course walk</li>\n                <li>9:00 AM - Practice runs (3 runs per driver)</li>\n                <li>10:30 AM - Coffee break</li>\n                <li>11:00 AM - Timed runs begin</li>\n            </ul>\n            \n            <h4>Afternoon Session (1:00 PM - 5:00 PM)</h4>\n            <ul>\n                <li>1:00 PM - Lunch break</li>\n                <li>2:00 PM - Competition runs continue</li>\n                <li>3:30 PM - Final runs</li>\n                <li>4:30 PM - Awards ceremony</li>\n                <li>5:00 PM - Event concludes</li>\n            </ul>\n        `},"daddies-day":{title:"DADDIES DAY OUT AUTOCROSS",image:"/assets/events/daddies.jpg",description:"A special event celebrating fathers and their passion for cars! Bring your family and enjoy a day of friendly competition, car shows, and family activities. Perfect for bonding over shared automotive enthusiasm.",date:"June 14-15, 2025",location:"Negros Occidental Racing Circuit",status:"Registration Closed",rules:`\n            <h3>Event Rules & Regulations</h3>\n            <h4>Family-Friendly Event</h4>\n            <ul>\n                <li>Open to all skill levels</li>\n                <li>Family spectators welcome</li>\n                <li>Kid-friendly activities available</li>\n                <li>Safe viewing areas for families</li>\n            </ul>\n            \n            <h4>Vehicle Categories</h4>\n            <ul>\n                <li>Stock Class - No modifications</li>\n                <li>Modified Class - Light modifications allowed</li>\n                <li>Vintage Class - Classic cars (pre-1990)</li>\n                <li>Family Class - Multi-generational teams</li>\n            </ul>\n            \n            <h4>Safety Requirements</h4>\n            <ul>\n                <li>All standard safety rules apply</li>\n                <li>Family members must stay in designated areas</li>\n                <li>Children under 12 must be supervised at all times</li>\n                <li>No pets allowed on the track</li>\n            </ul>\n        `,registration:`\n            <h3>Registration Information</h3>\n            <h4>Entry Fees</h4>\n            <ul>\n                <li>Single Driver: ₱3,000</li>\n                <li>Father-Son Team: ₱4,500</li>\n                <li>Family Package (4 people): ₱6,000</li>\n            </ul>\n            \n            <h4>What's Included</h4>\n            <ul>\n                <li>Event participation</li>\n                <li>Family lunch buffet</li>\n                <li>Event t-shirts for all participants</li>\n                <li>Family photo session</li>\n                <li>Kids' activities and games</li>\n            </ul>\n            \n            <h4>Registration Deadline</h4>\n            <p>June 15, 2025 - Limited to 75 participants</p>\n        `,schedule:`\n            <h3>Event Schedule</h3>\n            <h4>Morning Activities (8:00 AM - 12:00 PM)</h4>\n            <ul>\n                <li>8:00 AM - Family check-in and registration</li>\n                <li>8:30 AM - Welcome ceremony</li>\n                <li>9:00 AM - Car show and display</li>\n                <li>10:00 AM - Racing sessions begin</li>\n                <li>11:00 AM - Kids' activities start</li>\n            </ul>\n            \n            <h4>Afternoon Activities (1:00 PM - 6:00 PM)</h4>\n            <ul>\n                <li>1:00 PM - Family lunch</li>\n                <li>2:00 PM - Racing continues</li>\n                <li>3:00 PM - Family photo session</li>\n                <li>4:30 PM - Awards ceremony</li>\n                <li>5:00 PM - Family dinner and social</li>\n            </ul>\n        `},"gymkhana-championship":{title:"GYMKHANA CHAMPIONSHIP",image:"/assets/events/championship.jpg",description:"The premier autocross championship event! Compete against the best drivers in the region for the ultimate title. This high-stakes competition features challenging courses, professional timing, and prestigious awards.",date:"November 22-23, 2024",location:"Negros Occidental Racing Circuit",status:"Registration Closed",rules:`\n            <h3>Championship Rules & Regulations</h3>\n            <h4>Competition Classes</h4>\n            <ul>\n                <li>Pro Class - Professional drivers</li>\n                <li>Amateur Class - Experienced amateurs</li>\n                <li>Novice Class - First-time competitors</li>\n                <li>Team Class - 2-3 driver teams</li>\n            </ul>\n            \n            <h4>Technical Regulations</h4>\n            <ul>\n                <li>Strict vehicle inspection required</li>\n                <li>Safety equipment must meet FIA standards</li>\n                <li>No performance-enhancing modifications</li>\n                <li>All vehicles must pass noise regulations</li>\n            </ul>\n            \n            <h4>Competition Format</h4>\n            <ul>\n                <li>Qualifying rounds determine starting order</li>\n                <li>Elimination bracket for final rounds</li>\n                <li>Best time of three runs counts</li>\n                <li>Penalties for course violations</li>\n            </ul>\n        `,registration:`\n            <h3>Championship Registration</h3>\n            <h4>Entry Fees</h4>\n            <ul>\n                <li>Pro Class: ₱5,000</li>\n                <li>Amateur Class: ₱4,000</li>\n                <li>Novice Class: ₱3,500</li>\n                <li>Team Entry: ₱8,000</li>\n            </ul>\n            \n            <h4>Championship Prizes</h4>\n            <ul>\n                <li>1st Place: ₱50,000 + Trophy</li>\n                <li>2nd Place: ₱25,000 + Trophy</li>\n                <li>3rd Place: ₱15,000 + Trophy</li>\n                <li>Class Winners: ₱10,000 each</li>\n            </ul>\n            \n            <h4>Registration Requirements</h4>\n            <ul>\n                <li>Previous racing experience required</li>\n                <li>Vehicle must pass technical inspection</li>\n                <li>Complete safety equipment mandatory</li>\n                <li>Registration deadline: September 20, 2025</li>\n            </ul>\n        `,schedule:`\n            <h3>Championship Schedule</h3>\n            <h4>Day 1 - Qualifying (September 27)</h4>\n            <ul>\n                <li>8:00 AM - Driver check-in and inspection</li>\n                <li>9:00 AM - Practice sessions</li>\n                <li>11:00 AM - Qualifying rounds begin</li>\n                <li>2:00 PM - Lunch break</li>\n                <li>3:00 PM - Qualifying continues</li>\n                <li>6:00 PM - Qualifying results announced</li>\n            </ul>\n            \n            <h4>Day 2 - Finals (September 28)</h4>\n            <ul>\n                <li>8:00 AM - Finalist check-in</li>\n                <li>9:00 AM - Elimination rounds</li>\n                <li>12:00 PM - Lunch break</li>\n                <li>1:00 PM - Semi-finals</li>\n                <li>3:00 PM - Championship finals</li>\n                <li>5:00 PM - Awards ceremony</li>\n            </ul>\n        `},"special-module":{title:"SPECIAL MODULE",image:"/assets/events/specialmodule.jpg",description:"An exclusive training module designed for advanced drivers looking to perfect their skills. This intensive program includes professional instruction, advanced techniques, and personalized coaching.",date:"July 6-7, 2024",location:"Negros Occidental Racing Circuit",status:"Registration Closed",rules:`\n            <h3>Special Module Rules</h3>\n            <h4>Participant Requirements</h4>\n            <ul>\n                <li>Minimum 2 years racing experience</li>\n                <li>Valid racing license or equivalent</li>\n                <li>Advanced driving skills assessment</li>\n                <li>Medical clearance required</li>\n            </ul>\n            \n            <h4>Training Modules</h4>\n            <ul>\n                <li>Advanced car control techniques</li>\n                <li>Professional racing strategies</li>\n                <li>Mental preparation and focus</li>\n                <li>Physical conditioning for racing</li>\n            </ul>\n            \n            <h4>Safety Protocols</h4>\n            <ul>\n                <li>Enhanced safety equipment required</li>\n                <li>Professional medical staff on-site</li>\n                <li>Emergency response procedures</li>\n                <li>Weather contingency plans</li>\n            </ul>\n        `,registration:`\n            <h3>Special Module Registration</h3>\n            <h4>Program Fee</h4>\n            <p>₱15,000 per participant (includes all materials and equipment)</p>\n            \n            <h4>What's Included</h4>\n            <ul>\n                <li>Professional instruction</li>\n                <li>Personalized coaching sessions</li>\n                <li>Advanced training materials</li>\n                <li>Certificate of completion</li>\n                <li>Lunch and refreshments</li>\n            </ul>\n            \n            <h4>Registration Process</h4>\n            <ul>\n                <li>Submit application with racing resume</li>\n                <li>Skills assessment interview</li>\n                <li>Medical clearance submission</li>\n                <li>Payment confirmation</li>\n            </ul>\n            \n            <h4>Limited Availability</h4>\n            <p>Maximum 20 participants - Registration deadline: November 1, 2025</p>\n        `,schedule:`\n            <h3>Special Module Schedule</h3>\n            <h4>Morning Session (8:00 AM - 12:00 PM)</h4>\n            <ul>\n                <li>8:00 AM - Registration and orientation</li>\n                <li>8:30 AM - Classroom instruction</li>\n                <li>9:30 AM - Track walk and course analysis</li>\n                <li>10:30 AM - Practical exercises</li>\n                <li>11:30 AM - Individual coaching sessions</li>\n            </ul>\n            \n            <h4>Afternoon Session (1:00 PM - 6:00 PM)</h4>\n            <ul>\n                <li>1:00 PM - Advanced techniques workshop</li>\n                <li>2:30 PM - Practice sessions</li>\n                <li>4:00 PM - Performance analysis</li>\n                <li>5:00 PM - Q&A and feedback</li>\n                <li>6:00 PM - Certificate presentation</li>\n            </ul>\n        `}};document.querySelectorAll(".event-card.clickable").forEach(card=>{card.addEventListener("click",function(){const eventId=this.getAttribute("data-event");const event=eventData[eventId];if(event){openEventDetails(event)}})});function openEventDetails(event){document.getElementById("eventDetailsImage").src=event.image;document.getElementById("eventDetailsTitle").textContent=event.title;document.getElementById("eventDetailsDescription").textContent=event.description;document.getElementById("eventDetailsDate").innerHTML=`<i class="fas fa-calendar"></i> ${event.date}`;document.getElementById("eventDetailsLocation").innerHTML=`<i class="fas fa-map-marker-alt"></i> ${event.location}`;document.getElementById("eventDetailsStatus").innerHTML=`<i class="fas fa-clock"></i> ${event.status}`;document.getElementById("eventDetailsRules").innerHTML=event.rules;document.getElementById("eventDetailsRegistration").innerHTML=event.registration;document.getElementById("eventDetailsSchedule").innerHTML=event.schedule;const registerBtn=document.querySelector(".event-register-btn");if(event.status==="Registration Closed"){registerBtn.textContent="REGISTRATION CLOSED";registerBtn.style.opacity="0.6";registerBtn.style.cursor="not-allowed";registerBtn.removeAttribute("href")}else{registerBtn.textContent="REGISTER NOW";registerBtn.style.opacity="1";registerBtn.style.cursor="pointer";registerBtn.href="register.html"}eventDetailsModal.classList.add("active");document.body.style.overflow="hidden"}function closeEventDetails(){eventDetailsModal.classList.remove("active");document.body.style.overflow=""}eventDetailsClose.addEventListener("click",closeEventDetails);eventDetailsModal.addEventListener("click",function(e){if(e.target===eventDetailsModal){closeEventDetails()}});document.querySelectorAll(".event-tab-btn").forEach(btn=>{btn.addEventListener("click",function(){const tabName=this.getAttribute("data-event-tab");document.querySelectorAll(".event-tab-btn").forEach(b=>b.classList.remove("active"));document.querySelectorAll(".event-tab-content").forEach(c=>c.classList.remove("active"));this.classList.add("active");document.getElementById(tabName).classList.add("active")})});document.querySelector(".event-share-btn").addEventListener("click",function(){if(navigator.share){navigator.share({title:"Autocross Event",text:"Check out this exciting autocross event!",url:window.location.href})}else{const url=window.location.href;navigator.clipboard.writeText(url).then(()=>{alert("Event URL copied to clipboard!")})}});let lastScrollTop=0;let scrollTimeout;window.addEventListener("scroll",function(){const floatingCta=document.getElementById("floatingCta");const currentScrollTop=window.pageYOffset||document.documentElement.scrollTop;if(window.innerWidth<=768){if(currentScrollTop>300){floatingCta.classList.add("show")}else{floatingCta.classList.remove("show")}if(currentScrollTop<lastScrollTop&&lastScrollTop-currentScrollTop>50){floatingCta.classList.remove("show")}clearTimeout(scrollTimeout);scrollTimeout=setTimeout(()=>{if(currentScrollTop>300){floatingCta.classList.remove("show")}},3e3)}else{floatingCta.classList.remove("show")}lastScrollTop=currentScrollTop});document.addEventListener("DOMContentLoaded",function(){const floatingCta=document.getElementById("floatingCta");if(window.innerWidth<=768&&window.pageYOffset>300){floatingCta.classList.add("show")}});const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"};const observer=new IntersectionObserver(function(entries){entries.forEach(entry=>{if(entry.isIntersecting){entry.target.style.opacity="1";entry.target.style.transform="translateY(0)"}})},observerOptions);document.addEventListener("DOMContentLoaded",function(){const animatedElements=document.querySelectorAll(".event-card, .gallery-item, .merch-item, .news-item");animatedElements.forEach(el=>{el.style.opacity="0";el.style.transform="translateY(30px)";el.style.transition="opacity 0.6s ease, transform 0.6s ease";observer.observe(el)})});document.querySelectorAll(".gallery-item").forEach(item=>{item.addEventListener("mouseenter",function(){this.style.transform="scale(1.02)"});item.addEventListener("mouseleave",function(){this.style.transform="scale(1)"})});window.addEventListener("scroll",function(){const scrolled=window.pageYOffset;const heroImages=document.querySelectorAll(".hero-image img");if(heroImages.length>0){const rate=scrolled*-.3;heroImages.forEach(img=>{img.style.transform=`translateY(${rate}px)`})}});function updateCountdown(){const eventDate=new Date("2024-03-15T09:00:00");const now=new Date;const timeLeft=eventDate-now;if(timeLeft>0){const days=Math.floor(timeLeft/(1e3*60*60*24));const hours=Math.floor(timeLeft%(1e3*60*60*24)/(1e3*60*60));console.log(`Event in ${days} days and ${hours} hours`)}}setInterval(updateCountdown,36e5);document.addEventListener("DOMContentLoaded",function(){updateCountdown();document.body.style.opacity="0";document.body.style.transition="opacity 0.5s ease";window.addEventListener("load",function(){document.body.style.opacity="1"})});const apparelCarousel=document.querySelector(".carousel-container");if(apparelCarousel){const track=apparelCarousel.querySelector(".carousel-track");const items=Array.from(track.querySelectorAll(".merch-item"));const dotsContainer=apparelCarousel.querySelector(".carousel-dots");const itemWidth=items[0].offsetWidth+24;let currentIndex=0;let autoSlideInterval;function getVisibleCount(){return Math.floor(track.offsetWidth/itemWidth)||1}function getGroupCount(){return Math.max(1,items.length-getVisibleCount()+1)}function renderDots(){dotsContainer.innerHTML="";const groupCount=getGroupCount();for(let i=0;i<groupCount;i++){const dot=document.createElement("div");dot.classList.add("carousel-dot");if(i===0)dot.classList.add("active");dot.addEventListener("click",()=>{goToSlide(i);resetAutoSlide()});dotsContainer.appendChild(dot)}}function goToSlide(idx){currentIndex=idx;track.scrollTo({left:itemWidth*idx,behavior:"smooth"});const dots=Array.from(dotsContainer.children);dots.forEach(dot=>dot.classList.remove("active"));if(dots[idx])dots[idx].classList.add("active")}function nextSlide(){const groupCount=getGroupCount();let nextIdx=(currentIndex+1)%groupCount;goToSlide(nextIdx)}function resetAutoSlide(){clearInterval(autoSlideInterval);autoSlideInterval=setInterval(nextSlide,3e3)}renderDots();autoSlideInterval=setInterval(nextSlide,3e3);apparelCarousel.addEventListener("mouseenter",()=>clearInterval(autoSlideInterval));apparelCarousel.addEventListener("mouseleave",resetAutoSlide);window.addEventListener("resize",()=>{const prevGroupCount=dotsContainer.children.length;renderDots();if(dotsContainer.children.length!==prevGroupCount){goToSlide(0)}else{goToSlide(currentIndex)}})}document.addEventListener("DOMContentLoaded",function(){function isMobile(){return window.innerWidth<=600}const galleryItems=document.querySelectorAll(".gallery-item");galleryItems.forEach(item=>{item.addEventListener("click",function(e){if(!isMobile())return;galleryItems.forEach(i=>{if(i!==item)i.classList.remove("active")});item.classList.toggle("active");e.stopPropagation()})});document.addEventListener("click",function(e){if(!isMobile())return;galleryItems.forEach(item=>item.classList.remove("active"))})});document.addEventListener("DOMContentLoaded",function(){const modal=document.getElementById("galleryModal");const modalImage=document.getElementById("galleryModalImage");const modalCaption=document.getElementById("galleryModalCaption");const modalClose=document.getElementById("galleryModalClose");const modalPrev=document.getElementById("galleryModalPrev");const modalNext=document.getElementById("galleryModalNext");let currentImageIndex=0;let currentSectionItems=[];let allSections={};function initializeLightbox(){const galleryItems=Array.from(document.querySelectorAll(".gallery-item"));const memberIdItems=Array.from(document.querySelectorAll(".merch-item.member-id"));const stickerItems=Array.from(document.querySelectorAll(".merch-item.sticker"));const swiperSlides=Array.from(document.querySelectorAll(".swiper-slide"));allSections={gallery:galleryItems.filter(item=>item.dataset.image&&item.dataset.title&&item.dataset.description),memberIds:memberIdItems.filter(item=>item.dataset.image&&item.dataset.title&&item.dataset.description),stickers:stickerItems.filter(item=>item.dataset.image&&item.dataset.title&&item.dataset.description),apparel:swiperSlides.filter(item=>item.dataset.image&&item.dataset.title&&item.dataset.description)};Object.keys(allSections).forEach(sectionName=>{allSections[sectionName].forEach((item,index)=>{item.addEventListener("click",function(){openModal(sectionName,index)})})})}function openModal(sectionName,index){currentSectionItems=allSections[sectionName];currentImageIndex=index;const item=currentSectionItems[index];if(modalImage&&item){modalImage.src=item.dataset.image;modalImage.alt=item.dataset.title;if(modalCaption){modalCaption.textContent=item.dataset.description||item.dataset.title}modal.classList.add("active");document.body.style.overflow="hidden"}}function closeModal(){if(modal){modal.classList.remove("active");document.body.style.overflow="auto"}}function prevImage(){if(currentSectionItems.length===0)return;currentImageIndex=(currentImageIndex-1+currentSectionItems.length)%currentSectionItems.length;const item=currentSectionItems[currentImageIndex];if(modalImage&&item){modalImage.src=item.dataset.image;modalImage.alt=item.dataset.title;if(modalCaption){modalCaption.textContent=item.dataset.description||item.dataset.title}}}function nextImage(){if(currentSectionItems.length===0)return;currentImageIndex=(currentImageIndex+1)%currentSectionItems.length;const item=currentSectionItems[currentImageIndex];if(modalImage&&item){modalImage.src=item.dataset.image;modalImage.alt=item.dataset.title;if(modalCaption){modalCaption.textContent=item.dataset.description||item.dataset.title}}}if(modalClose){modalClose.addEventListener("click",closeModal)}if(modal){modal.addEventListener("click",e=>{if(e.target===modal){closeModal()}})}if(modalPrev){modalPrev.addEventListener("click",prevImage)}if(modalNext){modalNext.addEventListener("click",nextImage)}const playButton=document.querySelector(".play-button");const pauseButton=document.querySelector(".pause-button");const videoOverlay=document.querySelector(".video-overlay");const videoControls=document.querySelector(".video-controls");const video=document.querySelector(".video-container video");if(playButton&&pauseButton&&video){playButton.addEventListener("click",function(){videoOverlay.style.display="none";videoControls.style.display="block";pauseButton.style.display="flex";video.play()});pauseButton.addEventListener("click",function(){video.pause();videoOverlay.style.display="flex";videoControls.style.display="none";pauseButton.style.display="none"});video.addEventListener("ended",function(){videoOverlay.style.display="flex";videoControls.style.display="none";pauseButton.style.display="none"});video.addEventListener("pause",function(){if(video.currentTime<video.duration){videoOverlay.style.display="flex";videoControls.style.display="none";pauseButton.style.display="none"}});video.addEventListener("mouseenter",function(){if(!video.paused&&window.innerWidth>768){pauseButton.style.opacity="1"}});video.addEventListener("mouseleave",function(){if(!video.paused&&window.innerWidth>768){setTimeout(()=>{pauseButton.style.opacity="0.7"},1e3)}})}modalPrev.addEventListener("click",prevImage);modalNext.addEventListener("click",nextImage);modal.addEventListener("click",function(e){if(e.target===modal){closeModal()}});document.addEventListener("keydown",function(e){if(!modal||!modal.classList.contains("active"))return;switch(e.key){case"Escape":closeModal();break;case"ArrowLeft":prevImage();break;case"ArrowRight":nextImage();break}});initializeLightbox();initializeDriversTeamsSection();initializeCollectionsSection();if(typeof Swiper!=="undefined"){initializeSwiperCarousels()}else{window.addEventListener("load",function(){if(typeof Swiper!=="undefined"){initializeSwiperCarousels()}else{console.error("Swiper not loaded")}})}});function initializeDriversTeamsSection(){const tabBtns=document.querySelectorAll(".tab-btn");const tabContents=document.querySelectorAll(".tab-content");const prevBtn=document.querySelector(".prev-btn");const nextBtn=document.querySelector(".next-btn");let currentCarouselPosition=0;let activeTab="drivers";tabBtns.forEach(btn=>{btn.addEventListener("click",()=>{const targetTab=btn.getAttribute("data-tab");tabBtns.forEach(b=>b.classList.remove("active"));tabContents.forEach(content=>content.classList.remove("active"));btn.classList.add("active");const targetContent=document.getElementById(targetTab);if(targetContent){targetContent.classList.add("active")}activeTab=targetTab;currentCarouselPosition=0;updateCarouselPosition()})});if(prevBtn&&nextBtn){prevBtn.addEventListener("click",e=>{e.preventDefault();if(currentCarouselPosition>0){currentCarouselPosition--;updateCarouselPosition()}});nextBtn.addEventListener("click",e=>{e.preventDefault();const track=document.querySelector(`#${activeTab} .drivers-carousel-track`);if(track){const items=track.querySelectorAll(".carousel-item");const containerWidth=track.parentElement.offsetWidth;const itemWidth=getItemWidth();const visibleItems=Math.floor(containerWidth/itemWidth);const maxPosition=Math.max(0,items.length-visibleItems);if(currentCarouselPosition<maxPosition){currentCarouselPosition++;updateCarouselPosition()}}})}function getItemWidth(){const track=document.querySelector(`#${activeTab} .drivers-carousel-track`);if(track){const item=track.querySelector(".carousel-item");if(item){const itemRect=item.getBoundingClientRect();const styles=window.getComputedStyle(track);const gap=parseInt(styles.gap)||20;return itemRect.width+gap}}return 270}function updateCarouselPosition(){const track=document.querySelector(`#${activeTab} .drivers-carousel-track`);if(track){const itemWidth=getItemWidth();const translateX=currentCarouselPosition*itemWidth;track.style.transform=`translateX(-${translateX}px)`}}updateCarouselPosition()}function initializeCollectionsSection(){const collectionItems=document.querySelectorAll(".collection-item");console.log("Found collection items:",collectionItems.length);collectionItems.forEach((item,index)=>{console.log(`Initializing collection item ${index}:`,item.getAttribute("data-collection"));item.classList.add("active")})}function initializeSwiperCarousels(){console.log("initializeSwiperCarousels called");console.log("Swiper available:",typeof Swiper!=="undefined");const tshirtsCarousel=document.querySelector(".tshirts-carousel");const polosCarousel=document.querySelector(".polos-carousel");console.log("T-shirts carousel element:",tshirtsCarousel);console.log("Polo shirts carousel element:",polosCarousel);if(window.tshirtsSwiper){console.log("Destroying existing T-shirts Swiper");window.tshirtsSwiper.destroy(true,true)}if(window.polosSwiper){console.log("Destroying existing Polo shirts Swiper");window.polosSwiper.destroy(true,true)}window.tshirtsSwiper=new Swiper(".tshirts-carousel",{effect:"coverflow",grabCursor:true,centeredSlides:true,slidesPerView:1.7,loop:false,coverflowEffect:{rotate:0,stretch:60,depth:200,modifier:1.5,slideShadows:false,scale:.85},pagination:{el:".tshirts-carousel .swiper-pagination",clickable:true},navigation:{nextEl:".tshirts-next",prevEl:".tshirts-prev"},on:{init:function(){console.log("T-shirts carousel initialized")},slideChange:function(){console.log("T-shirts slide changed to:",this.realIndex);const currentSlide=this.slides[this.activeIndex];const slideTitle=currentSlide?currentSlide.getAttribute("data-title"):"unknown";console.log("T-shirts current slide title:",slideTitle)}}});window.polosSwiper=new Swiper(".polos-carousel",{effect:"coverflow",grabCursor:true,centeredSlides:true,slidesPerView:1.7,loop:false,coverflowEffect:{rotate:0,stretch:60,depth:200,modifier:1.5,slideShadows:false,scale:.85},pagination:{el:".polos-carousel .swiper-pagination",clickable:true},navigation:{nextEl:".polos-next",prevEl:".polos-prev"},on:{init:function(){console.log("Polo shirts carousel initialized")},slideChange:function(){console.log("Polo shirts slide changed to:",this.realIndex);const currentSlide=this.slides[this.activeIndex];const slideTitle=currentSlide?currentSlide.getAttribute("data-title"):"unknown";console.log("Polo shirts current slide title:",slideTitle)}}});console.log("Both carousels initialized successfully");setTimeout(()=>{const tshirtsNext=document.querySelector(".tshirts-next");const tshirtsPrev=document.querySelector(".tshirts-prev");const polosNext=document.querySelector(".polos-next");const polosPrev=document.querySelector(".polos-prev");console.log("Navigation buttons found:",{tshirtsNext:!!tshirtsNext,tshirtsPrev:!!tshirtsPrev,polosNext:!!polosNext,polosPrev:!!polosPrev})},1e3)}document.addEventListener("DOMContentLoaded",()=>{initializeViewAllModal()});function initializeViewAllModal(){const viewAllBtn=document.querySelector(".view-all-btn");const viewAllModal=document.getElementById("viewAllModal");const viewAllClose=document.getElementById("viewAllClose");const viewAllTitle=document.getElementById("viewAllTitle");const viewAllGrid=document.getElementById("viewAllGrid");const viewAllTabBtns=document.querySelectorAll(".view-all-tab-btn");const driversData=[{img:"/assets/drivers/driver1.jpg",name:"Oscar ",description:"Professional Driver"},{img:"/assets/drivers/driver2.jpg",name:"Lando",description:"Championship Winner"},{img:"/assets/drivers/driver3.png",name:"Max ",description:"Rising Star"},{img:"/assets/drivers/driver4.jpg",name:"George ",description:"Veteran Racer"},{img:"/assets/drivers/driver5.jpg",name:"Charles",description:"Speed Demon"},{img:"/assets/drivers/driver6.jpg",name:"Lewis",description:"Track Master"},{img:"/assets/drivers/driver7.jpg",name:"Kimi",description:"Autocross Expert"}];const teamsData=[{img:"/assets/teams/mclaren.jpg",name:"McLaren",description:"Formula 1 Team"},{img:"/assets/teams/mercedes.jpg",name:"Mercedes",description:"Petronas Team"},{img:"/assets/teams/ferrari.jpg",name:"Ferrari",description:"Red Bull Racing"},{img:"/assets/teams/redbull.jpg",name:"Red Bull",description:"McLaren Team"},{img:"/assets/teams/kick.jpg",name:"Kick",description:"Ferrari Team"},{img:"/assets/teams/aston.jpg",name:"Aston Martin",description:"Mercedes Team"},{img:"/assets/teams/alpine.jpg",name:"Alpine",description:"Alpine Team"}];let currentViewTab="drivers";function openViewAllModal(){viewAllModal.classList.add("active");document.body.style.overflow="hidden";showCurrentTab()}function closeViewAllModal(){viewAllModal.classList.remove("active");document.body.style.overflow="auto"}function showCurrentTab(){const data=currentViewTab==="drivers"?driversData:teamsData;const title=currentViewTab==="drivers"?"ALL DRIVERS":"ALL TEAMS";viewAllTitle.textContent=title;viewAllGrid.innerHTML="";data.forEach(item=>{const gridItem=document.createElement("div");gridItem.className="view-all-item";gridItem.innerHTML=`\n                <img src="${item.img}" alt="${item.name}" loading="lazy">\n                <h3>${item.name}</h3>\n                <p>${item.description}</p>\n            `;viewAllGrid.appendChild(gridItem)})}if(viewAllBtn){viewAllBtn.addEventListener("click",e=>{e.preventDefault();openViewAllModal()})}if(viewAllClose){viewAllClose.addEventListener("click",closeViewAllModal)}if(viewAllModal){viewAllModal.addEventListener("click",e=>{if(e.target===viewAllModal){closeViewAllModal()}})}viewAllTabBtns.forEach(btn=>{btn.addEventListener("click",()=>{viewAllTabBtns.forEach(b=>b.classList.remove("active"));btn.classList.add("active");currentViewTab=btn.dataset.viewTab;showCurrentTab()})});document.addEventListener("keydown",e=>{if(!viewAllModal||!viewAllModal.classList.contains("active"))return;if(e.key==="Escape"){closeViewAllModal()}})}document.addEventListener("DOMContentLoaded",function(){var updatesBtn=document.querySelector(".events-updates-btn");var comingSoonModal=document.getElementById("comingSoonModal");var comingSoonClose=document.getElementById("comingSoonClose");if(updatesBtn&&comingSoonModal&&comingSoonClose){updatesBtn.addEventListener("click",function(e){e.preventDefault();comingSoonModal.classList.add("active")});comingSoonClose.addEventListener("click",function(){comingSoonModal.classList.remove("active")});comingSoonModal.addEventListener("click",function(e){if(e.target===comingSoonModal){comingSoonModal.classList.remove("active")}})}});let map,marker,infoWindow;let isFullscreen=false;const TRACK_LOCATION=CONFIG.TRACK_LOCATION;function initMap(){map=new google.maps.Map(document.getElementById("trackMap"),{center:TRACK_LOCATION,zoom:CONFIG.MAP_CONFIG.zoom,mapTypeId:google.maps.MapTypeId[CONFIG.MAP_CONFIG.mapTypeId.toUpperCase()],styles:CONFIG.MAP_CONFIG.styles});marker=new google.maps.Marker({position:TRACK_LOCATION,map:map,title:CONFIG.TRACK_LOCATION.name,icon:{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(`\n                <svg width="40" height="40" viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg">\n                    <circle cx="20" cy="20" r="18" fill="#01764F" stroke="#F18A1F" stroke-width="2"/>\n                    <path d="M20 8 L24 16 L32 16 L26 22 L28 30 L20 26 L12 30 L14 22 L8 16 L16 16 Z" fill="#F18A1F"/>\n                    <text x="20" y="25" text-anchor="middle" fill="white" font-size="8" font-weight="bold">ACN</text>\n                </svg>\n            `),scaledSize:new google.maps.Size(40,40),anchor:new google.maps.Point(20,20)},animation:google.maps.Animation.DROP});infoWindow=new google.maps.InfoWindow({content:`\n            <div style="padding: 10px; max-width: 250px; background: white; color: black;">\n                <h3 style="margin: 0 0 8px 0; color: #01764F; font-size: 16px;">🏁 ${CONFIG.TRACK_LOCATION.name}</h3>\n                <p style="margin: 0 0 8px 0; font-size: 14px; color: #333;">${CONFIG.TRACK_LOCATION.address}</p>\n                <p style="margin: 0; font-size: 12px; color: #666;">\n                    State-of-the-art autocross facility with multiple course layouts, \n                    safety equipment, and spectator viewing areas.\n                </p>\n                <div style="margin-top: 10px;">\n                    <button onclick="getDirections()" style="\n                        background: #01764F; \n                        color: white; \n                        border: none; \n                        padding: 8px 12px; \n                        border-radius: 4px; \n                        cursor: pointer;\n                        font-size: 12px;\n                    ">Get Directions</button>\n                </div>\n            </div>\n        `});marker.addListener("click",()=>{infoWindow.open(map,marker)});marker.addListener("dblclick",()=>{getDirections()})}function getDirections(){const url=`https://www.google.com/maps/dir/?api=1&destination=${TRACK_LOCATION.lat},${TRACK_LOCATION.lng}&travelmode=driving`;window.open(url,"_blank")}function toggleSatelliteView(){const mapType=map.getMapTypeId();const newMapType=mapType===google.maps.MapTypeId.SATELLITE?google.maps.MapTypeId.ROADMAP:google.maps.MapTypeId.SATELLITE;map.setMapTypeId(newMapType);const satelliteBtn=document.getElementById("satelliteBtn");satelliteBtn.classList.toggle("active",newMapType===google.maps.MapTypeId.SATELLITE)}function toggleStreetView(){const streetView=map.getStreetView();const isVisible=streetView.getVisible();streetView.setVisible(!isVisible);if(!isVisible){streetView.setPosition(TRACK_LOCATION)}const streetBtn=document.getElementById("streetBtn");streetBtn.classList.toggle("active",!isVisible)}function toggleFullscreen(){const mapContainer=document.getElementById("trackMap");const fullscreenBtn=document.getElementById("fullscreenBtn");const exitFullscreenBtn=document.getElementById("exitFullscreenBtn");if(!isFullscreen){mapContainer.classList.add("fullscreen");fullscreenBtn.innerHTML='<i class="fas fa-expand"></i>';exitFullscreenBtn.style.display="block";exitFullscreenBtn.style.opacity="1";exitFullscreenBtn.style.visibility="visible";exitFullscreenBtn.style.position="fixed";exitFullscreenBtn.style.top="20px";exitFullscreenBtn.style.left="20px";exitFullscreenBtn.style.zIndex="10000";exitFullscreenBtn.classList.add("fullscreen-active");document.body.appendChild(exitFullscreenBtn);isFullscreen=true;console.log("Entered fullscreen mode, exit button should be visible");setTimeout(()=>{map.setZoom(Math.max(map.getZoom(),14));google.maps.event.trigger(map,"resize")},100)}else{exitFullscreen()}}function exitFullscreen(){const mapContainer=document.getElementById("trackMap");const fullscreenBtn=document.getElementById("fullscreenBtn");const exitFullscreenBtn=document.getElementById("exitFullscreenBtn");const trackLocationSection=document.querySelector(".track-location-section");mapContainer.classList.remove("fullscreen");fullscreenBtn.innerHTML='<i class="fas fa-expand"></i>';exitFullscreenBtn.style.display="none";exitFullscreenBtn.style.opacity="0";exitFullscreenBtn.style.visibility="hidden";exitFullscreenBtn.classList.remove("fullscreen-active");if(trackLocationSection){trackLocationSection.appendChild(exitFullscreenBtn)}isFullscreen=false;setTimeout(()=>{google.maps.event.trigger(map,"resize")},100)}document.addEventListener("DOMContentLoaded",function(){if(typeof google!=="undefined"&&google.maps){initMap()}else{window.addEventListener("load",initMap)}const satelliteBtn=document.getElementById("satelliteBtn");const streetBtn=document.getElementById("streetBtn");const fullscreenBtn=document.getElementById("fullscreenBtn");const getDirectionsBtn=document.getElementById("getDirectionsBtn");const trackInfoBtn=document.getElementById("trackInfoBtn");if(satelliteBtn)satelliteBtn.addEventListener("click",toggleSatelliteView);if(streetBtn)streetBtn.addEventListener("click",toggleStreetView);if(fullscreenBtn)fullscreenBtn.addEventListener("click",toggleFullscreen);const exitFullscreenBtn=document.getElementById("exitFullscreenBtn");if(exitFullscreenBtn)exitFullscreenBtn.addEventListener("click",exitFullscreen);if(getDirectionsBtn)getDirectionsBtn.addEventListener("click",getDirections);if(trackInfoBtn)trackInfoBtn.addEventListener("click",()=>{if(infoWindow&&marker){infoWindow.open(map,marker);if(isFullscreen){setTimeout(()=>{google.maps.event.trigger(map,"resize")},100)}}});document.addEventListener("keydown",function(e){if(e.key==="Escape"&&isFullscreen){exitFullscreen()}})});window.getDirections=getDirections;window.addEventListener("load",function(){if(typeof Swiper!=="undefined"){if(!window.tshirtsSwiper&&document.querySelector(".tshirts-carousel")){console.log("Initializing T-shirts carousel (fallback)");initializeSwiperCarousels()}if(!window.polosSwiper&&document.querySelector(".polos-carousel")){console.log("Initializing Polo shirts carousel (fallback)");initializeSwiperCarousels()}}else{console.error("Swiper library not available")}});